<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二维码API测试</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .qr-test {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .qr-image {
            margin: 10px;
            display: inline-block;
            text-align: center;
        }
        .qr-image img {
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .status {
            color: #666;
            font-size: 14px;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
    </style>
</head>
<body>
    <h1>二维码生成API测试</h1>
    
    <div class="qr-test">
        <h2>测试URL: https://news.aipush.fun/#/news/test123</h2>
        <div id="results"></div>
        <button onclick="testQRApis()" id="testBtn">开始测试</button>
    </div>

    <script>
        async function testQRApis() {
            const testBtn = document.getElementById('testBtn');
            const results = document.getElementById('results');
            const testUrl = 'https://news.aipush.fun/#/news/test123';
            const qrSize = 150;
            
            testBtn.disabled = true;
            results.innerHTML = '<p class="status">正在测试中...</p>';
            
            const qrApis = [
                {
                    name: 'QR Server API',
                    url: `https://api.qrserver.com/v1/create-qr-code/?size=${qrSize}x${qrSize}&data=${encodeURIComponent(testUrl)}&format=png&margin=1&ecc=H&color=000000&bgcolor=ffffff`
                },
                {
                    name: 'QuickChart API',
                    url: `https://quickchart.io/qr?text=${encodeURIComponent(testUrl)}&size=${qrSize}&format=png&ecLevel=H&margin=1&dark=000000&light=ffffff`
                },
                {
                    name: 'Google Charts API',
                    url: `https://chart.googleapis.com/chart?chs=${qrSize}x${qrSize}&cht=qr&chl=${encodeURIComponent(testUrl)}&choe=UTF-8&chld=H|1`
                }
            ];
            
            let html = '';
            
            for (const api of qrApis) {
                html += `<div class="qr-image">
                    <h3>${api.name}</h3>
                    <img src="${api.url}" width="${qrSize}" height="${qrSize}" 
                         onload="this.nextElementSibling.innerHTML='<span class=\\"success\\">✓ 加载成功</span>'"
                         onerror="this.nextElementSibling.innerHTML='<span class=\\"error\\">✗ 加载失败</span>'; this.style.display='none';"
                         crossorigin="anonymous" />
                    <p class="status">加载中...</p>
                    <p style="font-size: 12px; color: #999; word-break: break-all;">${api.url}</p>
                </div>`;
            }
            
            results.innerHTML = html;
            testBtn.disabled = false;
        }
    </script>
</body>
</html>