<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI推 - 正在跳转...</title>
  <meta name="description" content="正在为您跳转到AI推新闻页面..." />
  
  <!-- 微信环境优化 -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  
  <script>
    /**
     * GitHub Pages SPA路由处理
     * 将所有非静态资源的路由重定向到index.html，让React Router处理
     */
    (function(l) {
      // 检测是否为静态资源文件
      if (l.pathname.match(/\.(js|css|png|jpg|jpeg|gif|svg|ico|json|xml|txt)$/)) {
        console.log('静态资源文件，不重定向:', l.pathname);
        return;
      }
      
      var isWeChat = /micromessenger/i.test(navigator.userAgent);
      var currentPath = l.pathname;
      var search = l.search;
      var hash = l.hash;
      
      console.log('404页面处理:', { currentPath, search, hash, isWeChat });
      
      if (isWeChat) {
        // 微信环境使用HashRouter
        if (currentPath !== '/' && currentPath !== '/index.html') {
          var hashPath = '#' + currentPath + search + hash;
          console.log('微信环境重定向到:', hashPath);
          window.location.replace('/' + hashPath);
        } else {
          window.location.replace('/');
        }
      } else {
        // 普通环境：直接重定向到首页，让React Router的BrowserRouter处理
        // 使用sessionStorage保存原始路径，供React应用恢复
        if (currentPath !== '/' && currentPath !== '/index.html') {
          sessionStorage.setItem('redirectPath', currentPath + search + hash);
          console.log('保存重定向路径:', currentPath + search + hash);
        }
        
        // 重定向到根路径，让React应用处理路由
        window.location.replace('/');
      }
    }(window.location));
  </script>
</head>
<body>
  <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
    <h2>🔄 正在跳转...</h2>
    <p>正在为您跳转到AI推新闻页面</p>
    <p><small>如果页面没有自动跳转，请<a href="/" style="color: #0066cc;">点击这里</a></small></p>
  </div>
</body>
</html>