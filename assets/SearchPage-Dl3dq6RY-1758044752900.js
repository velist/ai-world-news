import{j as e}from"./ui-core-CGUdCK8q-1758044752900.js";import{r as s}from"./react-vendor-BrSRjOqW-1758044752900.js";import{u as t,e as r,a,H as l,N as n,M as c}from"./index-CV51W61R-1758044752900.js";import{m as i,X as o,C as d,P as m,t as x}from"./vendor-misc-BuGocmCZ-1758044752900.js";import"./utils-DdJ5UvfL-1758044752900.js";import"./query-BpyTceMZ-1758044752900.js";import"./router-BQArzIXA-1758044752900.js";import"./ui-extended-B1QiU4t6-1758044752900.js";const u=()=>{const{isZh:u}=t(),{news:h,categories:p}=r(),{getLocalizedCategory:g}=a(),[j,f]=s.useState(""),[b,N]=s.useState("all"),[v,w]=s.useState("relevance"),[y,C]=s.useState([]);s.useEffect(()=>{const e=localStorage.getItem("search-history");if(e)try{C(JSON.parse(e))}catch(s){}},[]);const k=s.useMemo(()=>{const e=j.trim().toLowerCase();let s=[...h];e&&(s=s.filter(s=>[s.title,s.summary,s.content??"",s.source??""].map(e=>e.toLowerCase()).some(s=>s.includes(e)))),"all"!==b&&(s=s.filter(e=>g(e.category)===b));const t=[...s];return"date"===v?t.sort((e,s)=>new Date(s.publishedAt).getTime()-new Date(e.publishedAt).getTime()):t.sort((s,t)=>{if(e){const r=s.title.toLowerCase().includes(e),a=t.title.toLowerCase().includes(e);if(r&&!a)return-1;if(!r&&a)return 1}return new Date(t.publishedAt).getTime()-new Date(s.publishedAt).getTime()})},[h,j,b,v,g]),S=e=>{f(e),e.trim()&&(e=>{if(!e.trim())return;const s=[e,...y.filter(s=>s!==e)].slice(0,10);C(s),localStorage.setItem("search-history",JSON.stringify(s))})(e.trim())};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs(l,{children:[e.jsx("title",{children:u?"AI推 - 搜索新闻":"AI Push - Search News"}),e.jsx("meta",{name:"description",content:u?"搜索AI相关新闻和资讯":"Search AI-related news and information"})]}),e.jsx("header",{className:"sticky top-0 z-40 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"container flex h-14 items-center",children:e.jsxs("div",{className:"flex flex-1 items-center space-x-2",children:[e.jsx(i,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:u?"搜索AI新闻...":"Search AI news...",value:j,onChange:e=>f(e.target.value),onKeyPress:e=>{"Enter"===e.key&&S(j)},className:"flex-1 bg-transparent border-none outline-none text-sm placeholder:text-muted-foreground",autoFocus:!0}),j&&e.jsx("button",{onClick:()=>f(""),className:"p-1 hover:bg-muted rounded-sm",children:e.jsx(o,{className:"h-4 w-4"})})]})})}),e.jsx("main",{className:"container mx-auto px-4 py-6",children:j?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("select",{value:b,onChange:e=>N(e.target.value),className:"text-sm bg-background border border-input rounded px-2 py-1",children:[e.jsx("option",{value:"all",children:u?"全部分类":"All Categories"}),p.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:u?"排序:":"Sort:"}),e.jsxs("select",{value:v,onChange:e=>w(e.target.value),className:"text-sm bg-background border border-input rounded px-2 py-1",children:[e.jsx("option",{value:"relevance",children:u?"相关性":"Relevance"}),e.jsx("option",{value:"date",children:u?"时间":"Date"})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u?`找到 ${k.length} 条相关新闻`:`Found ${k.length} relevant news items`}),k.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-20",children:k.map(s=>e.jsx(n,{...s,onImageError:()=>{},className:"h-full"},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mx-auto mb-4",children:e.jsx(i,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:u?"没有找到相关新闻":"No news found"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:u?`没有找到包含 "${j}" 的新闻，试试其他关键词吧`:`No news found containing "${j}". Try different keywords.`})]})]}):e.jsxs("div",{className:"space-y-6",children:[y.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:u?"搜索历史":"Search History"}),e.jsx("button",{onClick:()=>{C([]),localStorage.removeItem("search-history")},className:"text-xs text-muted-foreground hover:text-foreground",children:u?"清除":"Clear"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((s,t)=>e.jsxs("button",{onClick:()=>S(s),className:"flex items-center space-x-1 px-3 py-1.5 bg-muted hover:bg-muted/80 rounded-full text-sm",children:[e.jsx(d,{className:"h-3 w-3"}),e.jsx("span",{children:s})]},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:u?"热门搜索":"Popular Searches"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["GPT-4","Claude","人工智能","OpenAI","机器学习","深度学习","AI应用","自动驾驶","聊天机器人","大模型"].map((s,t)=>e.jsxs("button",{onClick:()=>S(s),className:"flex items-center space-x-1 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary rounded-full text-sm",children:[e.jsx(m,{className:"h-3 w-3"}),e.jsx("span",{children:s})]},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:u?"最新新闻":"Latest News"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.slice(0,6).map(s=>e.jsx(n,{...s,onImageError:()=>{}},s.id))})]})]})}),e.jsx(c,{currentPath:"/search",onMenuClick:()=>{}})]})};export{u as default};
