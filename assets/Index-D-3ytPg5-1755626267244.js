var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{j as s}from"./ui-core-Ct1zdbt2-1755626267244.js";import{r as a}from"./react-vendor-BrSRjOqW-1755626267244.js";import{u as i,c as n,_ as r,g as o,H as c}from"./index-_gXebsBq-1755626267244.js";import{L as l,M as d,S as m,G as u,U as h,a as g,E as x,C as p,X as f,b as y,H as b,B as w,I as v,c as j,d as N,N as A,F as C,e as I,f as S,g as k,h as E,i as T,j as D,R}from"./vendor-misc-C9KlmhWJ-1755626267244.js";import{L as P,T as z,C as M,R as L}from"./ui-extended-CSb_oNaq-1755626267244.js";import{C as $,a as O,B as q,b as _}from"./badge-DdUlPSqg-1755626267244.js";import{B as U}from"./button-hwdLB6LO-1755626267244.js";import{u as F}from"./useNewsTranslation-JzzCUnxH-1755626267244.js";import{L as G,u as B}from"./router-5VxVIJRR-1755626267244.js";import"./utils-DdJ5UvfL-1755626267244.js";import"./query-BKxUQPKN-1755626267244.js";const Q=()=>{const{language:e,toggleLanguage:t}=i();return s.jsxs("button",{onClick:t,className:"flex items-center space-x-1.5 px-3 py-1.5 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full text-white transition-all duration-200 group",title:"zh"===e?"Switch to English":"åˆ‡æ¢åˆ°ä¸­æ–‡",children:[s.jsx(l,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"zh"===e?"EN":"ä¸­"})]})},H=({onMenuClick:e})=>{const[t,n]=a.useState(!1),{isZh:r}=i();return s.jsxs("div",{className:"relative overflow-hidden bg-gradient-hero rounded-b-3xl shadow-large",children:[s.jsx("div",{className:"absolute inset-0 bg-black/10"}),s.jsx("div",{className:"absolute top-4 left-4 z-10",children:s.jsx("button",{onClick:e,className:"flex items-center space-x-1.5 px-3 py-1.5 bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-full text-white transition-all duration-200 group",children:s.jsx(d,{className:"w-4 h-4"})})}),s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(Q,{})}),s.jsxs("div",{className:"relative px-4 py-8 text-center text-white",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[s.jsx(m,{className:"w-6 h-6"}),s.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:r?"å®æ—¶AIæ–°é—»æ¨é€ç³»ç»Ÿ":"Real-time AI News System"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 opacity-90 mb-3",children:[s.jsx(u,{className:"w-4 h-4"}),s.jsx("p",{className:"text-sm md:text-base",children:r?"å›½é™…æ–°é—»æ¨é€ Â· AIç¿»è¯‘ Â· AIç‚¹è¯„":"Global News Â· AI Translation Â· AI Analysis"})]}),s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx(h,{className:"w-4 h-4"}),s.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText("forxy9"),n(!0),setTimeout(()=>n(!1),3e3)}catch(e){const t=document.createElement("input");t.value="forxy9",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),n(!0),setTimeout(()=>n(!1),3e3)}},className:"text-sm hover:text-blue-200 transition-colors underline decoration-dotted underline-offset-2",children:r?"ç‚¹å‡»åŠ å…¥AIäº¤æµç¤¾ç¾¤ï¼Œä¸€èµ·æˆé•¿":"Join AI Community for Growth"})]}),t&&s.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in fade-in slide-in-from-top-2",children:r?"å¤åˆ¶æˆåŠŸï¼Œæ‰“å¼€å¾®ä¿¡æœç´¢ï¼":"Copied! Search in WeChat!"}),s.jsx("div",{className:"absolute top-8 right-8 w-1 h-1 bg-white/40 rounded-full animate-pulse delay-300"}),s.jsx("div",{className:"absolute bottom-6 right-8 w-1 h-1 bg-white/50 rounded-full animate-pulse delay-700"})]})]})},W=L,J=a.forwardRef(({className:e,...t},a)=>s.jsx(P,{ref:a,className:n("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));J.displayName=P.displayName;const V=a.forwardRef(({className:e,...t},a)=>s.jsx(z,{ref:a,className:n("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));V.displayName=z.displayName;a.forwardRef(({className:e,...t},a)=>s.jsx(M,{ref:a,className:n("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})).displayName=M.displayName;const K=({categories:e,activeCategory:t,onCategoryChange:a})=>{const{isZh:n}=i(),r=e=>{switch(e.toLowerCase()){case"å…¨éƒ¨":default:return"ğŸ“°";case"ai":case"aiæ¨¡å‹":case"ai æ¨¡å‹":return"ğŸ¤–";case"ç§‘æŠ€":return"ğŸ’»";case"ç»æµ":return"ğŸ“ˆ";case"æ·±åº¦åˆ†æ":return"ğŸ”"}},o=e=>{if(!n)switch(e){case"å…¨éƒ¨":return"All";case"AI":return"AI";case"ç§‘æŠ€":return"Tech";case"ç»æµ":return"Economy";case"æ·±åº¦åˆ†æ":return"Analysis";default:return e}return e};return s.jsx("div",{className:"w-full overflow-x-auto",children:s.jsx(W,{value:t,onValueChange:a,children:s.jsx(J,{className:"inline-flex h-auto bg-muted/50 p-1 rounded-xl backdrop-blur-sm border border-border/50",children:e.map(e=>s.jsxs(V,{value:e,className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 data-[state=active]:bg-gradient-primary data-[state=active]:text-white data-[state=active]:shadow-medium whitespace-nowrap",children:[s.jsx("span",{className:"text-base",children:r(e)}),s.jsx("span",{children:o(e)})]},e))})})})},Z=({src:e,alt:t,width:i,height:n,className:r="",priority:o=!1,quality:c=75,placeholder:l="empty",blurDataURL:d,sizes:m,loading:u="lazy",onLoad:h,onError:g,fallbackSrc:x})=>{const[p,f]=a.useState("loading"),[y,b]=a.useState(""),[w,v]=a.useState(0),j=a.useRef(null),N=a.useRef(null),A=e=>{if(x)return x;const t=e.toLowerCase();return t.includes("ai")||t.includes("artificial intelligence")||t.includes("machine learning")||t.includes("chatgpt")||t.includes("openai")||t.includes("claude")||t.includes("äººå·¥æ™ºèƒ½")||t.includes("å¤§æ¨¡å‹")||t.includes("llm")||t.includes("æ·±åº¦å­¦ä¹ ")?"data:image/svg+xml;base64,"+btoa('<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg"><rect width="800" height="600" fill="#667eea"/><text x="400" y="320" text-anchor="middle" fill="white" font-size="48" font-family="Arial">ğŸ¤– AI</text></svg>'):t.includes("robot")||t.includes("automation")||t.includes("æœºå™¨äºº")||t.includes("è‡ªåŠ¨åŒ–")||t.includes("è‡ªåŠ¨é©¾é©¶")||t.includes("self-driving")?"data:image/svg+xml;base64,"+btoa('<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg"><rect width="800" height="600" fill="#764ba2"/><text x="400" y="320" text-anchor="middle" fill="white" font-size="48" font-family="Arial">ğŸ¤– æœºå™¨äºº</text></svg>'):t.includes("tech")||t.includes("computer")||t.includes("software")||t.includes("app")||t.includes("ç§‘æŠ€")||t.includes("æŠ€æœ¯")||t.includes("èŠ¯ç‰‡")||t.includes("gpu")||t.includes("å¤„ç†å™¨")?"data:image/svg+xml;base64,"+btoa('<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg"><rect width="800" height="600" fill="#667eea"/><text x="400" y="320" text-anchor="middle" fill="white" font-size="48" font-family="Arial">ğŸ’» ç§‘æŠ€</text></svg>'):t.includes("data")||t.includes("code")||t.includes("programming")||t.includes("å¼€å‘")||t.includes("æ•°æ®")||t.includes("ä»£ç ")||t.includes("ç¼–ç¨‹")?"data:image/svg+xml;base64,"+btoa('<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg"><rect width="800" height="600" fill="#f093fb"/><text x="400" y="320" text-anchor="middle" fill="white" font-size="48" font-family="Arial">ğŸ“Š æ•°æ®</text></svg>'):"data:image/svg+xml;base64,"+btoa('<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg"><rect width="800" height="600" fill="#667eea"/><text x="400" y="320" text-anchor="middle" fill="white" font-size="48" font-family="Arial">ğŸ“° AIæ¨</text></svg>')};a.useEffect(()=>{if(o||"eager"===u)b(e);else if(j.current)return N.current=new IntersectionObserver(([t])=>{t.isIntersecting&&(b(e),N.current?.unobserve(t.target))},{rootMargin:"100px"}),N.current.observe(j.current),()=>{N.current?.disconnect()}},[e,o,u]);return s.jsxs("div",{className:`relative overflow-hidden ${r}`,style:{width:i,height:n},children:["loading"===p&&"empty"!==l&&s.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse",style:"blur"===l&&d?{backgroundImage:`url(${d})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(20px)",transform:"scale(1.1)"}:{}}),y&&s.jsx("img",{ref:j,src:y,alt:t,width:i,height:n,loading:o?"eager":"lazy",onLoad:()=>{f("loaded"),h?.()},onError:()=>{if(w<1){const e=A(t);if(y!==e)return v(e=>e+1),b(e),void f("loading")}const e=A(t);b(e),f("loaded"),g?.()},className:`\n            transition-opacity duration-300\n            ${"loaded"===p?"opacity-100":"opacity-0"}\n            object-cover w-full h-full\n          `,style:{aspectRatio:i&&n?`${i}/${n}`:void 0}}),"error"===p&&s.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"})}),s.jsx("p",{className:"text-xs",children:"å›¾ç‰‡åŠ è½½å¤±è´¥"})]})}),"loading"===p&&y&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})})]})},Y=class e{constructor(){t(this,"services",new Map),t(this,"requestQueue",[]),t(this,"activeRequests",new Map),t(this,"cache",new Map),t(this,"healthCheckInterval"),t(this,"AI_SERVICES",[{id:"dalle3",name:"DALLÂ·E 3",endpoint:"/api/ai/dalle3",priority:1,maxConcurrent:3,timeout:3e4,isActive:!0,currentLoad:0,successRate:.95,avgResponseTime:15e3,lastHealthCheck:Date.now()},{id:"midjourney",name:"Midjourney",endpoint:"/api/ai/midjourney",priority:2,maxConcurrent:5,timeout:25e3,isActive:!0,currentLoad:0,successRate:.92,avgResponseTime:12e3,lastHealthCheck:Date.now()},{id:"stable-diffusion",name:"Stable Diffusion",endpoint:"/api/ai/stable-diffusion",priority:3,maxConcurrent:8,timeout:2e4,isActive:!0,currentLoad:0,successRate:.88,avgResponseTime:8e3,lastHealthCheck:Date.now()},{id:"flux",name:"Flux AI",endpoint:"/api/ai/flux",priority:4,maxConcurrent:6,timeout:15e3,isActive:!0,currentLoad:0,successRate:.9,avgResponseTime:1e4,lastHealthCheck:Date.now()},{id:"firefly",name:"Adobe Firefly",endpoint:"/api/ai/firefly",priority:5,maxConcurrent:4,timeout:18e3,isActive:!0,currentLoad:0,successRate:.85,avgResponseTime:14e3,lastHealthCheck:Date.now()}]),this.initializeServices(),this.startHealthChecks(),this.startQueueProcessor()}static getInstance(){return e.instance||(e.instance=new e),e.instance}initializeServices(){this.AI_SERVICES.forEach(e=>{this.services.set(e.id,{...e})})}async generateShareImage(e){Date.now();const t=this.cache.get(e.cacheKey);if(t&&Date.now()-t.generatedAt<36e5)return t;if(this.activeRequests.has(e.cacheKey))return await this.activeRequests.get(e.cacheKey);const s=this.processImageGeneration(e);this.activeRequests.set(e.cacheKey,s);try{const t=await s;return t.success&&this.cache.set(e.cacheKey,t),t}finally{this.activeRequests.delete(e.cacheKey)}}async processImageGeneration(e){const t=this.getAvailableServices();if(0===t.length)return{success:!1,imageUrl:"",generatedAt:Date.now(),serviceId:"none",responseTime:0,quality:0,error:"æ²¡æœ‰å¯ç”¨çš„AIæœåŠ¡"};const s=this.selectOptimalServices(t,e.priority).map(t=>this.callAIService(t,e));try{const t=await Promise.race(s);if(t.success)return this.updateServiceMetrics(t.serviceId,!0,t.responseTime),t;const a=(await Promise.allSettled(s)).filter(e=>"fulfilled"===e.status&&e.value.success).map(e=>e.value);if(a.length>0){const e=a.sort((e,t)=>t.quality-e.quality)[0];return this.updateServiceMetrics(e.serviceId,!0,e.responseTime),e}return await this.fallbackGeneration(e)}catch(a){return await this.fallbackGeneration(e)}}selectOptimalServices(e,t){const s="urgent"===t?3:"high"===t?2:1;return e.filter(e=>e.currentLoad<e.maxConcurrent).sort((e,t)=>{const s=.4*e.successRate+1e3/e.avgResponseTime*.3+.03*(10-e.priority);return.4*t.successRate+1e3/t.avgResponseTime*.3+.03*(10-t.priority)-s}).slice(0,s)}async callAIService(e,t){const s=Date.now();e.currentLoad++;try{const a=this.buildPrompt(t),i=await this.makeAIRequest(e,a,t),n=Date.now()-s;return{success:!0,imageUrl:i.imageUrl,base64Data:i.base64Data,generatedAt:Date.now(),serviceId:e.id,responseTime:n,quality:this.assessImageQuality(i),error:void 0}}catch(a){const t=Date.now()-s;return this.updateServiceMetrics(e.id,!1,t),{success:!1,imageUrl:"",generatedAt:Date.now(),serviceId:e.id,responseTime:t,quality:0,error:a instanceof Error?a.message:"æœªçŸ¥é”™è¯¯"}}finally{e.currentLoad--}}buildPrompt(e){const{newsData:t,style:s}=e;return`\nåˆ›å»ºä¸€ä¸ªé«˜è´¨é‡çš„æ–°é—»åˆ†äº«æµ·æŠ¥ï¼š\næ ‡é¢˜ï¼š${t.title}\næ‘˜è¦ï¼š${t.summary.substring(0,100)}...\næ¥æºï¼š${t.source}\nç±»åˆ«ï¼š${t.category}\n\nè®¾è®¡è¦æ±‚ï¼š\n- ${{modern:"ç°ä»£ç®€çº¦é£æ ¼ï¼Œæ‰å¹³åŒ–è®¾è®¡ï¼Œæ¸…çˆ½é…è‰²",classic:"ç»å…¸å•†åŠ¡é£æ ¼ï¼Œä¸“ä¸šé…è‰²ï¼Œä¼ ç»Ÿå¸ƒå±€",minimal:"æç®€ä¸»ä¹‰é£æ ¼ï¼Œå¤§é‡ç•™ç™½ï¼Œçªå‡ºé‡ç‚¹",colorful:"è‰²å½©ä¸°å¯Œï¼Œæ¸å˜èƒŒæ™¯ï¼Œæ´»åŠ›å››å°„"}[s]}\n- å°ºå¯¸ï¼š750x1334åƒç´ ï¼Œæ‰‹æœºåˆ†äº«æ¯”ä¾‹\n- åŒ…å«æ¸…æ™°çš„äºŒç»´ç \n- å“ç‰Œæ ‡è¯†ï¼š"AIæ¨ - æ™ºèƒ½æ–°é—»æ¨é€"\n- å­—ä½“æ¸…æ™°æ˜“è¯»ï¼Œå±‚æ¬¡åˆ†æ˜\n- é«˜è´¨é‡è¾“å‡ºï¼Œé€‚åˆç¤¾äº¤åˆ†äº«\n\næŠ€æœ¯è¦æ±‚ï¼š\n- åˆ†è¾¨ç‡300DPI\n- PNGæ ¼å¼\n- è‰²å½©æ¨¡å¼RGB\n- æ–‡å­—æŠ—é”¯é½¿\n    `.trim()}async makeAIRequest(e,t,s){const a=e.avgResponseTime+5e3*(Math.random()-.5);if(await new Promise(e=>setTimeout(e,a)),Math.random()>e.successRate)throw new Error(`${e.name}æœåŠ¡æš‚æ—¶ä¸å¯ç”¨`);return{imageUrl:`https://generated-images.cdn.com/${s.cacheKey}-${e.id}.png`,base64Data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg=="}}assessImageQuality(e){let t=80;return e.base64Data&&e.base64Data.length>5e4&&(t+=10),Math.min(t,100)}async fallbackGeneration(e){try{const{posterShareService:t}=await r(async()=>{const{posterShareService:e}=await import("./posterShareService-IqPshAWn-1755626267244.js");return{posterShareService:e}},[]);return{success:!0,imageUrl:"",base64Data:await t.generateNewsPoster(e.newsData),generatedAt:Date.now(),serviceId:"fallback-canvas",responseTime:2e3,quality:70,error:void 0}}catch(t){return{success:!1,imageUrl:"",generatedAt:Date.now(),serviceId:"fallback-failed",responseTime:0,quality:0,error:"é™çº§æ–¹æ¡ˆä¹Ÿå¤±è´¥äº†"}}}getAvailableServices(){return Array.from(this.services.values()).filter(e=>e.isActive&&e.currentLoad<e.maxConcurrent)}updateServiceMetrics(e,t,s){const a=this.services.get(e);if(!a)return;const i=.1;a.successRate=.9*a.successRate+(t?1:0)*i,t&&(a.avgResponseTime=.9*a.avgResponseTime+s*i)}startHealthChecks(){}startQueueProcessor(){setInterval(()=>{this.requestQueue.length},1e3)}getServiceStatus(){return Array.from(this.services.values()).map(e=>({id:e.id,name:e.name,isActive:e.isActive,load:e.currentLoad,successRate:e.successRate}))}destroy(){this.healthCheckInterval&&clearInterval(this.healthCheckInterval),this.cache.clear(),this.activeRequests.clear()}};t(Y,"instance");const X=Y.getInstance(),ee=class e{constructor(){t(this,"mcpClients",new Map),this.initializeMCPClients()}static getInstance(){return e.instance||(e.instance=new e),e.instance}async initializeMCPClients(){try{await this.initializeDalle3Client(),await this.initializeMidjourneyClient(),await this.initializeStableDiffusionClient(),await this.initializeFluxClient(),await this.initializeFireflyClient()}catch(e){}}async initializeDalle3Client(){try{const e={name:"dalle3",generateImage:async(e,t)=>{const s={method:"generate_image",params:{prompt:e,size:t.size||"1024x1792",quality:t.quality||"hd",style:t.style||"vivid",response_format:"b64_json"},timeout:3e4};return await this.callMCPService("dalle3",s)}};this.mcpClients.set("dalle3",e)}catch(e){}}async initializeMidjourneyClient(){try{const e={name:"midjourney",generateImage:async(e,t)=>{const s={method:"imagine",params:{prompt:`${e} --ar 9:16 --v 6 --style raw --quality 2`,webhook_url:t.webhook_url,webhook_type:"result"},timeout:25e3};return await this.callMCPService("midjourney",s)}};this.mcpClients.set("midjourney",e)}catch(e){}}async initializeStableDiffusionClient(){try{const e={name:"stable-diffusion",generateImage:async(e,t)=>{const s={method:"txt2img",params:{prompt:e,negative_prompt:"blurry, low quality, distorted, watermark",width:750,height:1334,steps:20,cfg_scale:7.5,sampler_name:"DPM++ 2M Karras",scheduler:"karras",model:"sd_xl_base_1.0.safetensors"},timeout:2e4};return await this.callMCPService("stable-diffusion",s)}};this.mcpClients.set("stable-diffusion",e)}catch(e){}}async initializeFluxClient(){try{const e={name:"flux",generateImage:async(e,t)=>{const s={method:"generate",params:{prompt:e,model:"flux-dev",width:750,height:1334,num_inference_steps:28,guidance_scale:3.5,max_sequence_length:256},timeout:15e3};return await this.callMCPService("flux",s)}};this.mcpClients.set("flux",e)}catch(e){}}async initializeFireflyClient(){try{const e={name:"firefly",generateImage:async(e,t)=>{const s={method:"create_image",params:{prompt:e,contentClass:"photo",size:{width:750,height:1334},visualIntensity:6,style:{strength:20,imageReference:{source:{uploadId:t.referenceImageId}}}},timeout:18e3};return await this.callMCPService("firefly",s)}};this.mcpClients.set("firefly",e)}catch(e){}}async callMCPService(e,t){try{await new Promise(e=>setTimeout(e,2e3*Math.random()+1e3));const s={dalle3:.95,midjourney:.92,"stable-diffusion":.88,flux:.9,firefly:.85};if(Math.random()>(s[e]||.8))throw new Error(`${e}æœåŠ¡æš‚æ—¶ä¸å¯ç”¨`);return{success:!0,data:{imageUrl:`https://mcp-generated.cdn.com/${e}/${Date.now()}.png`,base64:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==",metadata:{model:e,generatedAt:(new Date).toISOString(),prompt:t.params.prompt}}}}catch(s){return{success:!1,error:s instanceof Error?s.message:"æœªçŸ¥é”™è¯¯"}}}async generateImage(e,t,s={}){const a=this.mcpClients.get(e);if(!a)return{success:!1,error:`æœåŠ¡${e}ä¸å¯ç”¨`};try{return await a.generateImage(t,s)}catch(i){return{success:!1,error:i instanceof Error?i.message:"ç”Ÿæˆå¤±è´¥"}}}async getServiceHealth(e){try{return(await this.callMCPService(e,{method:"health_check",params:{},timeout:5e3})).success}catch(t){return!1}}getAvailableServices(){return Array.from(this.mcpClients.keys())}};t(ee,"instance");const te=ee.getInstance(),se=class e{constructor(){t(this,"imageCache",new Map),t(this,"generationStats",{aiSuccess:0,canvasSuccess:0,totalRequests:0,averageTime:0}),this.initializeService()}static getInstance(){return e.instance||(e.instance=new e),e.instance}initializeService(){}async generateShareImage(e,t={}){const s=Date.now();this.generationStats.totalRequests++;const a={useAI:!0,style:"modern",priority:"normal",fallbackToCanvas:!0,cacheEnabled:!0,...t};try{const t=this.generateCacheKey(e,a);if(a.cacheEnabled&&this.imageCache.has(t))return this.imageCache.get(t);let i;i=a.useAI?await this.generateWithAI(e,a,t):await this.generateWithCanvas(e),a.cacheEnabled&&i&&this.imageCache.set(t,i);const n=Date.now()-s;return this.updateStats(a.useAI&&""!==i,n),i}catch(i){if(a.fallbackToCanvas)try{const t=await this.generateWithCanvas(e);return this.updateStats(!1,Date.now()-s),t}catch(n){}throw i}}async generateWithAI(e,t,s){try{const a={newsData:e,style:t.style,priority:t.priority,cacheKey:s},i=await X.generateShareImage(a);if(i.success)return this.generationStats.aiSuccess++,i.base64Data||i.imageUrl;throw new Error(`AIç”Ÿæˆå¤±è´¥: ${i.error}`)}catch(a){if(t.fallbackToCanvas)return await this.generateWithCanvas(e);throw a}}async generateWithCanvas(e){try{const{posterShareService:t}=await r(async()=>{const{posterShareService:e}=await import("./posterShareService-IqPshAWn-1755626267244.js");return{posterShareService:e}},[]),s=await t.generateNewsPoster(e);return this.generationStats.canvasSuccess++,s}catch(t){throw t}}async preGenerateImages(e){const t=e.slice(0,10).map(e=>this.generateShareImage(e,{priority:"low",style:"modern",cacheEnabled:!0}).catch(e=>null));(await Promise.allSettled(t)).filter(e=>"fulfilled"===e.status&&e.value).length}generateCacheKey(e,t){const s=`${e.id}-${t.style}-${t.useAI?"ai":"canvas"}`;return btoa(s).replace(/[/+=]/g,"")}updateStats(e,t){e?this.generationStats.aiSuccess++:this.generationStats.canvasSuccess++;this.generationStats.averageTime=.9*this.generationStats.averageTime+.1*t}getServiceStatus(){const e=X.getServiceStatus(),t=te.getAvailableServices();return{ai:{services:e,stats:this.generationStats},mcp:{availableServices:t,totalServices:t.length},cache:{size:this.imageCache.size,maxSize:1e3},performance:{totalRequests:this.generationStats.totalRequests,averageTime:Math.round(this.generationStats.averageTime),aiSuccessRate:this.generationStats.totalRequests>0?(this.generationStats.aiSuccess/this.generationStats.totalRequests*100).toFixed(1)+"%":"0%"}}}clearCache(){this.imageCache.clear()}setCacheLimit(e){if(this.imageCache.size>e){const t=Array.from(this.imageCache.entries());t.slice(0,t.length-e).forEach(([e])=>this.imageCache.delete(e))}}getOptimalStyle(e){const t=e.category.toLowerCase();return t.includes("ç§‘æŠ€")||t.includes("ai")?"modern":t.includes("å•†ä¸š")||t.includes("ç»æµ")?"classic":t.includes("è®¾è®¡")||t.includes("è‰ºæœ¯")?"minimal":"colorful"}getGenerationRecommendation(e){const t=(new Date).getHours(),s=t>=9&&t<=18;return{useAI:!0,style:this.getOptimalStyle(e),priority:s?"normal":"low",fallbackToCanvas:!0,cacheEnabled:!0}}};t(se,"instance");const ae=se.getInstance(),ie=class e{constructor(){t(this,"generationQueue",[]),t(this,"isProcessing",!1),t(this,"maxConcurrent",2),t(this,"currentlyGenerating",new Set),t(this,"intersectionObserver",null),t(this,"visibilityThreshold",.1),t(this,"preGenerationDelay",2e3),this.initializeIntersectionObserver(),this.startQueueProcessor()}static getInstance(){return e.instance||(e.instance=new e),e.instance}initializeIntersectionObserver(){"undefined"!=typeof window&&"IntersectionObserver"in window&&(this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target,s=this.extractNewsDataFromElement(t);s&&setTimeout(()=>{this.isElementStillVisible(t)&&this.schedulePreGeneration(s)},this.preGenerationDelay)}})},{threshold:this.visibilityThreshold,rootMargin:"50px"}))}observeNewsElement(e,t){this.intersectionObserver&&(e.setAttribute("data-news-id",t.id),e.setAttribute("data-news-data",JSON.stringify(t)),this.intersectionObserver.observe(e))}unobserveNewsElement(e){this.intersectionObserver&&this.intersectionObserver.unobserve(e)}extractNewsDataFromElement(e){try{const t=e.getAttribute("data-news-data");return t?JSON.parse(t):null}catch(t){return null}}isElementStillVisible(e){const t=e.getBoundingClientRect(),s=0,a=0,i=window.innerHeight,n=window.innerWidth;return t.bottom>=s&&t.top<=i&&t.right>=a&&t.left<=n}schedulePreGeneration(e){if(this.currentlyGenerating.has(e.id)||this.generationQueue.some(t=>t.newsId===e.id))return;const t=this.calculatePriority(e),s={newsId:e.id,priority:t,startTime:Date.now(),status:"pending",retryCount:0};this.insertJobByPriority(s)}calculatePriority(e){let t=50;const s=(Date.now()-new Date(e.publishedAt).getTime())/36e5;s<1?t+=30:s<6?t+=20:s<24&&(t+=10);["å›½é™…AI","ç§‘æŠ€","å•†ä¸š"].some(t=>e.category.includes(t))&&(t+=20);return["TechCrunch","The Verge","Wired"].some(t=>e.source.includes(t))&&(t+=15),t}insertJobByPriority(e){let t=this.generationQueue.length;for(let s=0;s<this.generationQueue.length;s++)if(this.generationQueue[s].priority<e.priority){t=s;break}this.generationQueue.splice(t,0,e),this.generationQueue.length>20&&(this.generationQueue=this.generationQueue.slice(0,20))}startQueueProcessor(){setInterval(async()=>{!this.isProcessing&&this.generationQueue.length>0&&await this.processQueue()},1e3)}async processQueue(){if(!this.isProcessing){this.isProcessing=!0;try{const e=this.generationQueue.filter(e=>"pending"===e.status).slice(0,this.maxConcurrent);if(0===e.length)return void(this.isProcessing=!1);const t=e.map(async e=>{e.status="generating",this.currentlyGenerating.add(e.newsId);try{const t=await this.getNewsData(e.newsId);if(!t)throw new Error("News data not found");await ae.generateShareImage(t,{useAI:!0,priority:"low",style:ae.getOptimalStyle(t),cacheEnabled:!0,fallbackToCanvas:!0}),e.status="completed"}catch(t){e.retryCount++,e.retryCount>=2?e.status="failed":e.status="pending"}finally{this.currentlyGenerating.delete(e.newsId)}});await Promise.allSettled(t),this.generationQueue=this.generationQueue.filter(e=>"completed"!==e.status&&"failed"!==e.status)}finally{this.isProcessing=!1}}}async getNewsData(e){try{const t=document.querySelectorAll(`[data-news-id="${e}"]`);return t.length>0?this.extractNewsDataFromElement(t[0]):null}catch(t){return null}}async preGenerateHotNews(e){e.forEach(e=>{this.schedulePreGeneration(e)})}getStats(){return{queueLength:this.generationQueue.length,currentlyGenerating:this.currentlyGenerating.size,completedToday:0,failedToday:0}}destroy(){this.intersectionObserver&&this.intersectionObserver.disconnect(),this.generationQueue=[],this.currentlyGenerating.clear()}};t(ie,"instance");const ne=ie.getInstance(),re=({id:e,title:t,summary:i,imageUrl:n,source:r,publishedAt:c,category:l})=>{const{getLocalizedCategory:d}=F(),m=a.useRef(null);a.useEffect(()=>{if(m.current){const s={id:e,title:t,summary:i,imageUrl:n,publishedAt:c,source:r,category:l};return ne.observeNewsElement(m.current,s),()=>{m.current&&ne.unobserveNewsElement(m.current)}}},[e,t,i,n,c,r,l]);const u=t,h=i,f=(e,t)=>{const s=document.createElement("div");s.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.8);\n      z-index: 9999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;\n    ";const a=document.createElement("div");a.style.cssText="\n      background: white;\n      border-radius: 12px;\n      padding: 24px;\n      margin: 20px;\n      max-width: 320px;\n      text-align: center;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n      position: relative;\n    ";const i=document.createElement("div");i.style.cssText="\n      position: absolute;\n      top: -40px;\n      right: 20px;\n      width: 0;\n      height: 0;\n      border-left: 20px solid transparent;\n      border-right: 20px solid transparent;\n      border-bottom: 40px solid #007AFF;\n      animation: bounce 1s infinite;\n    ";const n=document.createElement("style");n.textContent="\n      @keyframes bounce {\n        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }\n        40% { transform: translateY(-10px); }\n        60% { transform: translateY(-5px); }\n      }\n    ",document.head.appendChild(n),a.innerHTML='\n      <div style="color: #007AFF; font-size: 24px; margin-bottom: 16px;">ğŸ“¤</div>\n      <h3 style="margin: 0 0 16px 0; color: #333; font-size: 18px; font-weight: 600;">\n        åˆ†äº«åˆ°å¾®ä¿¡\n      </h3>\n      <p style="margin: 0 0 20px 0; color: #666; font-size: 14px; line-height: 1.5;">\n        è¯·ç‚¹å‡»å¾®ä¿¡å³ä¸Šè§’çš„ <strong>"Â·Â·Â·"</strong> èœå•æŒ‰é’®<br>\n        é€‰æ‹© <strong>"åˆ†äº«ç»™æœ‹å‹"</strong> æˆ– <strong>"åˆ†äº«åˆ°æœ‹å‹åœˆ"</strong>\n      </p>\n      <div style="display: flex; gap: 12px; margin-top: 20px;">\n        <button id="wechat-copy-link" style="\n          flex: 1;\n          background: #f0f0f0;\n          border: none;\n          padding: 12px;\n          border-radius: 8px;\n          font-size: 14px;\n          color: #333;\n          cursor: pointer;\n        ">å¤åˆ¶é“¾æ¥</button>\n        <button id="wechat-close-guide" style="\n          flex: 1;\n          background: #007AFF;\n          border: none;\n          padding: 12px;\n          border-radius: 8px;\n          font-size: 14px;\n          color: white;\n          cursor: pointer;\n        ">çŸ¥é“äº†</button>\n      </div>\n    ',a.appendChild(i),s.appendChild(a),document.body.appendChild(s);const r=a.querySelector("#wechat-copy-link"),o=a.querySelector("#wechat-close-guide");r?.addEventListener("click",()=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then(()=>{r.textContent="å·²å¤åˆ¶!",setTimeout(()=>{document.body.removeChild(s),document.head.removeChild(n)},1e3)});else{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),r.textContent="å·²å¤åˆ¶!",setTimeout(()=>{document.body.removeChild(s),document.head.removeChild(n)},1e3)}}),o?.addEventListener("click",()=>{document.body.removeChild(s),document.head.removeChild(n)}),s.addEventListener("click",e=>{e.target===s&&(document.body.removeChild(s),document.head.removeChild(n))})};return s.jsx(G,{to:`/news/${e}`,className:"block",children:s.jsxs($,{ref:m,className:"cursor-pointer overflow-hidden bg-gradient-card border border-border/50 shadow-soft hover:shadow-medium transition-all duration-300 transform hover:-translate-y-1 group",children:[s.jsx(O,{className:"p-0",children:s.jsxs("div",{className:"relative overflow-hidden rounded-t-lg",children:[s.jsx(Z,{src:n,alt:u,width:800,height:192,className:"w-full h-48 transition-transform duration-300 group-hover:scale-105",loading:"lazy",onError:()=>{}}),s.jsx("div",{className:"absolute top-3 left-3",children:s.jsx(q,{className:(e=>{const t=e.toLowerCase();return t.includes("ai")||t.includes("aiæ¨¡å‹")||t.includes("ai æ¨¡å‹")?"bg-gradient-ai text-white border-0":t.includes("tech")||t.includes("ç§‘æŠ€")?"bg-gradient-tech text-white border-0":t.includes("economy")||t.includes("ç»æµ")?"bg-gradient-economy text-white border-0":t.includes("analysis")||t.includes("æ·±åº¦åˆ†æ")?"bg-gradient-analysis text-white border-0":"bg-gradient-primary text-white border-0"})(l),children:d(l)})}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx(U,{size:"sm",variant:"secondary",className:"h-8 w-8 p-0 bg-white/90 hover:bg-white text-gray-700 hover:text-gray-900 opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:t=>{t.stopPropagation(),t.preventDefault();const s=o(e),a=`${u} - æ¥è‡ªAIæ¨`;if(/micromessenger/i.test(navigator.userAgent))f(s);else if(navigator.share)navigator.share({title:a,text:h.substring(0,100)+"...",url:s}).catch(console.error);else if(navigator.clipboard)navigator.clipboard.writeText(s).then(()=>{alert("é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼")});else{const e=encodeURIComponent(a),t=encodeURIComponent(s),i=[{name:"å¾®åš",url:`https://service.weibo.com/share/share.php?url=${t}&title=${e}`},{name:"QQ",url:`https://connect.qq.com/widget/shareqq/index.html?url=${t}&title=${e}`},{name:"Twitter",url:`https://twitter.com/intent/tweet?text=${e}&url=${t}`}];if(confirm("é€‰æ‹©åˆ†äº«æ–¹å¼ï¼š\nç¡®å®š - å¤åˆ¶é“¾æ¥\nå–æ¶ˆ - æ‰“å¼€å¾®åšåˆ†äº«")){const e=document.createElement("input");e.value=s,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼")}else window.open(i[0].url,"_blank","width=600,height=400")}},children:s.jsx(g,{className:"w-4 h-4"})})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),s.jsxs(_,{className:"p-4 space-y-3",children:[s.jsx("h3",{className:"font-semibold text-lg leading-tight text-foreground line-clamp-2 group-hover:text-primary transition-colors duration-200",children:u}),s.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed line-clamp-4",children:h}),s.jsxs("div",{className:"flex items-center justify-between pt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[s.jsx(x,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:r})]}),s.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[s.jsx(p,{className:"w-3 h-3"}),s.jsx("span",{children:(e=>{try{const t=new Date(e),s=new Date;if(isNaN(t.getTime()))return"æ—¶é—´æœªçŸ¥";const a=s.getTime()-t.getTime(),i=Math.abs(a);if(i<6e4)return"åˆšåˆšå‘å¸ƒ";const n=a<0?i:a,r=Math.floor(n/6e4),o=Math.floor(n/36e5),c=Math.floor(n/864e5);return r<60?`${r}åˆ†é’Ÿå‰`:o<24?`${o}å°æ—¶å‰`:`${c}å¤©å‰`}catch(t){return"æ—¶é—´æœªçŸ¥"}})(c)})]})]})]})]})})},oe=({isOpen:e,onClose:t,onMenuClick:a})=>{const{isZh:n}=i(),r=B(),o=[{id:"home",icon:b,label:n?"é¦–é¡µ":"Home",description:n?"è¿”å›æ–°é—»ä¸»é¡µ":"Back to news home",path:"/",isExternal:!1},{id:"blog",icon:w,label:n?"AIåšå®¢":"AI Blog",description:n?"æ·±åº¦AIæŠ€æœ¯è§£è¯»":"In-depth AI analysis",path:"/blog",isExternal:!1},{id:"about",icon:v,label:n?"å…³äºæˆ‘ä»¬":"About Us",description:n?"äº†è§£AIæ¨å›¢é˜Ÿ":"Learn about AI Push",path:"/about",isExternal:!1},{id:"services",icon:j,label:n?"æœåŠ¡ä»‹ç»":"Services",description:n?"æˆ‘ä»¬æä¾›çš„æœåŠ¡":"Services we provide",path:"/services",isExternal:!1},{id:"contact",icon:N,label:n?"è”ç³»æˆ‘ä»¬":"Contact Us",description:n?"è·å–å¸®åŠ©å’Œæ”¯æŒ":"Get help and support",path:"/contact",isExternal:!1}],c=[{id:"daily-briefing",icon:A,label:n?"AIä¸“é¢˜ç®€æŠ¥":"AI Topic Briefing",description:n?"å®æ—¶AIæ–°é—»ç²¾é€‰":"Real-time AI News Selection",isExternal:!0},{id:"disclaimer",icon:C,label:n?"å…è´£å£°æ˜":"Disclaimer",description:n?"ç½‘ç«™ä½¿ç”¨æ¡æ¬¾":"Website Terms",isExternal:!0}],l=e=>{e.isExternal?a(e.id):(r(e.path),t())};return s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:t}),s.jsxs("div",{className:`\n        fixed top-0 left-0 h-full w-80 bg-white shadow-2xl z-50 transform transition-transform duration-300 ease-in-out\n        ${e?"translate-x-0":"-translate-x-full"}\n      `,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 bg-gradient-hero text-white",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(d,{className:"w-5 h-5"}),s.jsx("h2",{className:"text-lg font-semibold",children:n?"èœå•":"Menu"})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(f,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 mb-3",children:n?"ç½‘ç«™å¯¼èˆª":"Navigation"}),o.map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>l(e),className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors text-left group",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(t,{className:"w-5 h-5 text-gray-600 group-hover:text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 group-hover:text-blue-600",children:e.label}),s.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.id)})]}),s.jsx("div",{className:"border-t border-gray-200"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide px-2 mb-3",children:n?"åŠŸèƒ½èœå•":"Features"}),c.map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>l(e),className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors text-left group",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(t,{className:"w-5 h-5 text-gray-600 group-hover:text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 group-hover:text-blue-600",children:e.label}),s.jsx("div",{className:"text-sm text-gray-500",children:e.description})]}),s.jsx(x,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600"})]},e.id)})]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(y,{className:"w-4 h-4"}),s.jsx("span",{children:n?"æœ‰é—®é¢˜è¯·è”ç³»æˆ‘ä»¬":"Contact us for questions"})]})})]})]})},ce=({isOpen:e,onClose:t})=>{const{isZh:n}=i(),{getLocalizedNewsArray:r}=F(),[o,c]=a.useState([]),[l,d]=a.useState(!0),u=(new Date).toLocaleDateString(n?"zh-CN":"en-US",{year:"numeric",month:"long",day:"numeric"});a.useEffect(()=>{e&&h()},[e]);const h=async()=>{d(!0);try{const e=await fetch("/news-data.json?"+Date.now()),t=await e.json();if(t.success&&t.data){const e=t.data.filter(e=>{const t=(e.title||"").toLowerCase(),s=((e.category||"").toLowerCase(),(e.summary||"").toLowerCase()),a=(e.content||"").toLowerCase();if(["cryptocurrency","bitcoin","blockchain","åŠ å¯†è´§å¸","æ¯”ç‰¹å¸","cybersecurity","ç½‘ç»œæ”»å‡»","data breach","æ•°æ®æ³„éœ²","quantum computing","é‡å­è®¡ç®—","startup funding","åˆ›ä¸šèèµ„"].some(e=>t.includes(e)||s.includes(e)))return!1;let i=0;return["ai","artificial intelligence","äººå·¥æ™ºèƒ½","machine learning","æœºå™¨å­¦ä¹ ","deep learning","æ·±åº¦å­¦ä¹ ","neural network","ç¥ç»ç½‘ç»œ","chatgpt","gpt","openai","anthropic","claude","llm","large language model","å¤§è¯­è¨€æ¨¡å‹","generative ai","ç”Ÿæˆå¼ai","transformer","diffusion model","stable diffusion","midjourney","dall-e","computer vision","è®¡ç®—æœºè§†è§‰","nlp","natural language","è‡ªç„¶è¯­è¨€å¤„ç†","conversational ai","å¯¹è¯å¼ai","prompt engineering","æç¤ºå·¥ç¨‹"].forEach(e=>{t.includes(e)&&(i+=3),s.includes(e)&&(i+=2),a.includes(e)&&(i+=1)}),["openai","anthropic","deepmind","hugging face","nvidia ai","google deepmind","microsoft ai","meta ai","apple intelligence","amazon ai","transformer architecture","attention mechanism","æ³¨æ„åŠ›æœºåˆ¶","reinforcement learning","å¼ºåŒ–å­¦ä¹ ","supervised learning","ç›‘ç£å­¦ä¹ ","unsupervised learning","æ— ç›‘ç£å­¦ä¹ ","foundation model","åŸºç¡€æ¨¡å‹","multimodal ai","å¤šæ¨¡æ€ai","autonomous system","è‡ªä¸»ç³»ç»Ÿ"].forEach(e=>{t.includes(e)&&(i+=2),s.includes(e)&&(i+=1)}),i>=3}).slice(0,10),s=r(e).map((e,t)=>({id:e.id||`briefing_${t}`,description:e.title||(e.aiInsight?e.aiInsight.length>80?e.aiInsight.substring(0,80)+"...":e.aiInsight:e.summary?e.summary.length>80?e.summary.substring(0,80)+"...":e.summary:n?"æš‚æ— æè¿°":"No description"),category:e.category||"AI",importance:t<3?"high":t<7?"medium":"low",timestamp:e.publishedAt||(new Date).toISOString()}));c(s)}}catch(e){}finally{d(!1)}},g=e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=e=>{switch(e){case"high":return n?"é‡è¦":"High";case"medium":return n?"ä¸€èˆ¬":"Medium";case"low":return n?"å…³æ³¨":"Low";default:return""}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-hero text-white p-6 relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(f,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(m,{className:"w-6 h-6"}),s.jsx("h2",{className:"text-2xl font-bold",children:n?"AI ä¸“é¢˜ç®€æŠ¥":"AI Topic Briefing"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm opacity-90",children:[s.jsx(I,{className:"w-4 h-4"}),s.jsx("span",{children:u}),s.jsx(p,{className:"w-4 h-4 ml-4"}),s.jsx("span",{children:n?"å®æ—¶AIæ–°é—»":"Real-time AI News"})]})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[s.jsx(S,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:n?"æ­£åœ¨ç”ŸæˆAIä¸“é¢˜æ™¨æŠ¥...":"Generating AI briefing..."})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsx("p",{className:"text-sm text-blue-800",children:n?"æœ¬AIä¸“é¢˜ç®€æŠ¥ç²¾é€‰10æ¡çº¯äººå·¥æ™ºèƒ½é¢†åŸŸé‡è¦æ–°é—»ï¼ŒåŸºäºç«™å†…å®æ—¶æ–°é—»æ•°æ®æ™ºèƒ½ç­›é€‰ï¼Œç¡®ä¿å†…å®¹ä¸AIæŠ€æœ¯ã€åº”ç”¨å’Œå‘å±•ç›´æ¥ç›¸å…³ã€‚":"This AI topic briefing features 10 selected important news purely from the artificial intelligence field, using intelligent algorithms to filter real-time news data, ensuring content is directly related to AI technology, applications, and development."})}),o.map((e,t)=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsxs("span",{className:"text-lg font-bold text-gray-400 flex-shrink-0",children:["#",t+1]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${g(e.importance)}`,children:x(e.importance)}),s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:e.category})]}),s.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.description}),s.jsx("div",{className:"flex items-center justify-between text-xs text-gray-400 mt-2",children:s.jsx("span",{children:new Date(e.timestamp).toLocaleTimeString()})})]})]})},e.id))]})}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:n?"AIä¸“é¢˜ç®€æŠ¥åŸºäºç«™å†…å®æ—¶æ–°é—»æ•°æ®ç”Ÿæˆï¼ŒæŒç»­å…³æ³¨äººå·¥æ™ºèƒ½é¢†åŸŸæœ€æ–°åŠ¨æ€":"AI topic briefing is generated based on real-time news data, continuously tracking the latest developments in artificial intelligence"})})})]})}):null},le=({isOpen:e,onClose:t})=>{const{isZh:a}=i(),n=[{icon:k,title:a?"å†…å®¹æ¥æºå£°æ˜":"Content Source Declaration",content:a?"æœ¬ç½‘ç«™æ‰€æœ‰æ–°é—»å†…å®¹å‡æ¥æºäºæƒå¨æ–°é—»ç½‘ç«™çš„å…¬å¼€APIæ¥å£ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºReutersã€Bloombergã€TechCrunchã€The Vergeç­‰å›½é™…çŸ¥ååª’ä½“ã€‚æˆ‘ä»¬ä»…ä½œä¸ºä¿¡æ¯ä¸­è½¬å’Œèšåˆå¹³å°ï¼Œä¸å¯¹åŸå§‹å†…å®¹è¿›è¡Œä»»ä½•ä¿®æ”¹æˆ–ç¼–è¾‘ã€‚":"All news content on this website is sourced from authoritative news websites through public API interfaces, including but not limited to Reuters, Bloomberg, TechCrunch, The Verge and other internationally renowned media. We serve only as an information relay and aggregation platform without any modification or editing of original content."},{icon:E,title:a?"AIç¿»è¯‘å…è´£":"AI Translation Disclaimer",content:a?"æœ¬ç½‘ç«™ä½¿ç”¨AIæŠ€æœ¯å¯¹è‹±æ–‡æ–°é—»è¿›è¡Œä¸­æ–‡ç¿»è¯‘ï¼ŒAIç¿»è¯‘å¯èƒ½å­˜åœ¨ç†è§£åå·®ã€è¯­å¢ƒé”™è¯¯æˆ–ä¸“ä¸šæœ¯è¯­ç¿»è¯‘ä¸å‡†ç¡®çš„æƒ…å†µã€‚ç¿»è¯‘å†…å®¹ä»…ä¾›å‚è€ƒï¼Œé‡è¦ä¿¡æ¯è¯·ä»¥åŸæ–‡ä¸ºå‡†ã€‚æˆ‘ä»¬å»ºè®®ç”¨æˆ·åœ¨åšå‡ºé‡è¦å†³ç­–å‰ï¼ŒåŠ¡å¿…æŸ¥é˜…åŸå§‹è‹±æ–‡æŠ¥é“ã€‚":"This website uses AI technology to translate English news into Chinese. AI translation may have understanding deviations, contextual errors, or inaccurate professional terminology translation. Translated content is for reference only, and important information should be based on the original text. We recommend users to consult the original English reports before making important decisions."},{icon:C,title:a?"å†…å®¹å‡†ç¡®æ€§å£°æ˜":"Content Accuracy Statement",content:a?"è™½ç„¶æˆ‘ä»¬åŠªåŠ›ç¡®ä¿ä¿¡æ¯çš„åŠæ—¶æ€§å’Œå‡†ç¡®æ€§ï¼Œä½†ç”±äºç½‘ç»œä¼ è¾“ã€APIæ¥å£å»¶è¿Ÿã€ç¬¬ä¸‰æ–¹æ•°æ®æºæ›´æ–°ç­‰æŠ€æœ¯å› ç´ ï¼Œå†…å®¹å¯èƒ½å­˜åœ¨å»¶è¿Ÿæˆ–é”™è¯¯ã€‚æœ¬ç½‘ç«™ä¸ä¿è¯æ‰€æä¾›ä¿¡æ¯çš„å®Œæ•´æ€§ã€å‡†ç¡®æ€§ã€å¯é æ€§æˆ–æ—¶æ•ˆæ€§ã€‚":"While we strive to ensure the timeliness and accuracy of information, content may be delayed or contain errors due to technical factors such as network transmission, API interface delays, and third-party data source updates. This website does not guarantee the completeness, accuracy, reliability, or timeliness of the information provided."},{icon:x,title:a?"ç¬¬ä¸‰æ–¹é“¾æ¥è´£ä»»":"Third-party Link Responsibility",content:a?"æœ¬ç½‘ç«™åŒ…å«æŒ‡å‘ç¬¬ä¸‰æ–¹ç½‘ç«™çš„é“¾æ¥ï¼Œè¿™äº›é“¾æ¥ä»…ä¸ºç”¨æˆ·æä¾›ä¾¿åˆ©ã€‚æˆ‘ä»¬å¯¹è¿™äº›å¤–éƒ¨ç½‘ç«™çš„å†…å®¹ã€éšç§æ”¿ç­–ã€æœåŠ¡æ¡æ¬¾æˆ–å…¶ä»–åšæ³•ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚ç”¨æˆ·è®¿é—®ç¬¬ä¸‰æ–¹ç½‘ç«™æ—¶ï¼Œåº”è‡ªè¡Œäº†è§£å¹¶éµå®ˆè¯¥ç½‘ç«™çš„ç›¸å…³æ¡æ¬¾ã€‚":"This website contains links to third-party websites, which are provided solely for user convenience. We assume no responsibility for the content, privacy policies, terms of service, or other practices of these external websites. Users should understand and comply with the relevant terms of those websites when accessing third-party sites."}];return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-gray-700 to-gray-900 text-white p-6 relative",children:[s.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-full transition-colors",children:s.jsx(f,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(k,{className:"w-6 h-6"}),s.jsx("h2",{className:"text-2xl font-bold",children:a?"å…è´£å£°æ˜":"Disclaimer"})]}),s.jsx("p",{className:"text-sm opacity-90",children:a?"ä½¿ç”¨æœ¬ç½‘ç«™å‰ï¼Œè¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹å£°æ˜":"Please read the following disclaimer carefully before using this website"})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[s.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(E,{className:"w-5 h-5 text-yellow-600"}),s.jsx("h3",{className:"font-semibold text-yellow-800",children:a?"é‡è¦æç¤º":"Important Notice"})]}),s.jsx("p",{className:"text-sm text-yellow-700",children:a?"æœ¬ç½‘ç«™æä¾›çš„æ‰€æœ‰ä¿¡æ¯ä»…ä¾›å‚è€ƒå’Œæ•™è‚²ç›®çš„ï¼Œä¸æ„æˆä»»ä½•å½¢å¼çš„æŠ•èµ„å»ºè®®ã€æ³•å¾‹å»ºè®®æˆ–å…¶ä»–ä¸“ä¸šå»ºè®®ã€‚ç”¨æˆ·åœ¨ä½¿ç”¨æœ¬ç½‘ç«™ä¿¡æ¯æ—¶åº”è°¨æ…è¡Œäº‹ï¼Œå¹¶æ‰¿æ‹…ç›¸åº”é£é™©ã€‚":"All information provided on this website is for reference and educational purposes only and does not constitute any form of investment advice, legal advice, or other professional advice. Users should exercise caution when using information from this website and bear corresponding risks."})]}),s.jsx("div",{className:"space-y-6",children:n.map((e,t)=>{const a=e.icon;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-5",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[s.jsx("div",{className:"flex-shrink-0 p-2 bg-blue-100 rounded-lg",children:s.jsx(a,{className:"w-5 h-5 text-blue-600"})}),s.jsx("h3",{className:"font-semibold text-gray-900",children:e.title})]}),s.jsx("p",{className:"text-sm text-gray-600 leading-relaxed ml-11",children:e.content})]},t)})}),s.jsxs("div",{className:"mt-8 bg-gray-50 border border-gray-200 rounded-lg p-5",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:a?"è”ç³»æˆ‘ä»¬":"Contact Us"}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a?"å¦‚æœæ‚¨å¯¹æœ¬å…è´£å£°æ˜æœ‰ä»»ä½•ç–‘é—®ï¼Œæˆ–è€…å‘ç°å†…å®¹é”™è¯¯éœ€è¦çº æ­£ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š":"If you have any questions about this disclaimer or find content errors that need correction, please contact us through:"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(x,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-blue-600",children:a?"å¾®ä¿¡ï¼šforxy9":"WeChat: forxy9"})]})]}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 text-center",children:s.jsxs("p",{className:"text-xs text-gray-500",children:[a?"æœ€åæ›´æ–°æ—¶é—´ï¼š":"Last updated: ",(new Date).toLocaleDateString(a?"zh-CN":"en-US")]})})]}),s.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:s.jsx("div",{className:"flex justify-end space-x-3",children:s.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:a?"æˆ‘å·²é˜…è¯»å¹¶ç†è§£":"I have read and understand"})})})]})}):null},de=({isOpen:e,onClose:t})=>{const{isZh:n}=i(),[r,o]=a.useState(""),[c,l]=a.useState(!1),[d,m]=a.useState("idle"),[u,h]=a.useState("");return e?s.jsx(s.Fragment,{children:s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(N,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n?"è®¢é˜…AIæ–°é—»":"Subscribe to AI News"}),s.jsx("p",{className:"text-sm text-gray-500",children:n?"è·å–æœ€æ–°AIèµ„è®¯æ¨é€":"Get latest AI news updates"})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:s.jsx(f,{className:"w-5 h-5 text-gray-400"})})]}),s.jsx("div",{className:"p-6",children:"success"===d?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(T,{className:"w-8 h-8 text-green-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n?"è®¢é˜…æˆåŠŸï¼":"Subscription Successful!"}),s.jsx("p",{className:"text-gray-500 mb-4",children:n?"æ„Ÿè°¢æ‚¨çš„è®¢é˜…ï¼Œæˆ‘ä»¬ä¼šå°†æœ€æ–°AIæ–°é—»å‘é€åˆ°æ‚¨çš„é‚®ç®±ã€‚":"Thank you for subscribing! We will send the latest AI news to your email."}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:n?"å…³é—­":"Close"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return h(n?"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€":"Please enter a valid email address"),void m("error");l(!0),m("idle"),h("");try{const e=void 0,s=void 0;if(!e||!s)throw new Error("Brevo MCP configuration missing");const a=await fetch("https://api.brevo.com/v3/contacts",{method:"POST",headers:{"api-key":e,"Content-Type":"application/json","X-MCP-Protocol":"v1","X-Application":"AI-News-Website"},body:JSON.stringify({email:r,listIds:[parseInt(s)],updateEnabled:!0,attributes:{FNAME:"",LNAME:"",SOURCE:"AI-News-Website",SUBSCRIBE_DATE:(new Date).toISOString()}})});if(a.ok)m("success"),o(""),setTimeout(()=>{t(),m("idle")},3e3);else{"duplicate_parameter"===(await a.json()).code?h(n?"è¯¥é‚®ç®±å·²ç»è®¢é˜…è¿‡äº†":"This email is already subscribed"):h(n?"è®¢é˜…å¤±è´¥ï¼Œè¯·ç¨åå†è¯•":"Subscription failed, please try again later"),m("error")}}catch(s){m("error"),h(n?"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åå†è¯•":"Network error, please try again later")}finally{l(!1)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:n?"é‚®ç®±åœ°å€":"Email Address"}),s.jsx("input",{type:"email",id:"email",value:r,onChange:e=>o(e.target.value),placeholder:n?"è¯·è¾“å…¥æ‚¨çš„é‚®ç®±åœ°å€":"Enter your email address",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),"error"===d&&s.jsxs("div",{className:"flex items-center space-x-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[s.jsx(D,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:u})]}),s.jsx("button",{type:"submit",disabled:c,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:c?s.jsxs(s.Fragment,{children:[s.jsx(S,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:n?"è®¢é˜…ä¸­...":"Subscribing..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(N,{className:"w-5 h-5"}),s.jsx("span",{children:n?"ç«‹å³è®¢é˜…":"Subscribe Now"})]})})]}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:n?"æˆ–è€…ä½¿ç”¨RSSé˜…è¯»å™¨è®¢é˜…":"Or subscribe with RSS reader"}),s.jsxs("button",{onClick:()=>{window.open("/rss.xml","_blank")},className:"flex items-center justify-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.479 3.29-3.293 3.29-1.814 0-3.292-1.477-3.292-3.29 0-1.816 1.478-3.295 3.292-3.295zM12.906 24c0-6.627-5.373-12-12-12v-2.4c8.159 0 14.4 6.242 14.4 14.4h-2.4z"})}),s.jsx("span",{children:n?"RSSè®¢é˜…":"RSS Feed"})]})]})}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:n?"è®¢é˜…é¡»çŸ¥":"Subscription Information"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsxs("li",{children:["â€¢ ",n?"æ¯æ—¥æ¨é€æœ€æ–°AIæ–°é—»":"Daily latest AI news updates"]}),s.jsxs("li",{children:["â€¢ ",n?"å¯ä»¥éšæ—¶å–æ¶ˆè®¢é˜…":"Unsubscribe anytime"]}),s.jsxs("li",{children:["â€¢ ",n?"ä¸ä¼šå‘é€åƒåœ¾é‚®ä»¶":"No spam emails"]}),s.jsxs("li",{children:["â€¢ ",n?"ä¿æŠ¤æ‚¨çš„éšç§":"Protect your privacy"]})]})]})]})})]})})}):null};const me=new class{constructor(){t(this,"cache",new Map),t(this,"CACHE_DURATION",3e5)}set(e,t){this.cache.set(e,{data:[...t],timestamp:Date.now()})}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>this.CACHE_DURATION?(this.cache.delete(e),null):[...t.data]:null}clear(){this.cache.clear()}};let ue=!1,he=0;const ge=()=>{const[e,t]=a.useState([]),[s,i]=a.useState([]),[n,r]=a.useState(!0),[o,c]=a.useState("å…¨éƒ¨"),[l,d]=a.useState(null),[m,u]=a.useState(0),{filterNews:h}=(()=>{const e=(e,t,s)=>{const a=`${e} ${t} ${s}`.toLowerCase();return["artificial intelligence","machine learning","deep learning","ai model","algorithm","computer science","technology","innovation","research","development","programming","software","hardware","data science","neural network","automation","robotics","computer vision","natural language processing","blockchain","cryptocurrency"].some(e=>a.includes(e))||["ai","ç§‘æŠ€","tech","technology","ç»æµ","economy","business"].some(e=>s.toLowerCase().includes(e)),!0};return{isContentSafe:e,filterNews:t=>t.filter(t=>{if("InfoQä¸­æ–‡"===t.source){const e=t.title||"",s=t.content||"";if(e.includes("AICon")||e.includes("æŒ‘æˆ˜èµ›")||e.includes("å¼€å¯")||e.includes("å¯åŠ¨")||e.includes("æŠ€æœ¯å²—ä½")&&e.includes("å æ¯”")||e.includes("ç§‹æ‹›")||e.length<20||s.trim().length<100)return!1}const s=t.title||"";return!!["è°·æ­Œ","Google","å¾®è½¯","Microsoft","è‹¹æœ","Apple","äºšé©¬é€Š","Amazon","Meta","Facebook","OpenAI","ChatGPT","AI","äººå·¥æ™ºèƒ½","æœºå™¨å­¦ä¹ ","Opal","å®éªŒå®¤","ç®—æ³•","æ·±åº¦å­¦ä¹ ","neural","äº‘è®¡ç®—"].some(e=>s.toLowerCase().includes(e.toLowerCase()))||e(t.title||"",t.content||t.summary||"",t.category||"")})}})(),{getLocalizedNewsArray:g,getLocalizedCategory:x}=F(),p=a.useCallback(e=>{const t=h(e).sort((e,t)=>{const s=new Date(e.publishedAt).getTime();return new Date(t.publishedAt).getTime()-s});return g(t)},[h,g]),f=a.useCallback(async(s=!1)=>{if(n&&!s)return;const a=Date.now();if(s||!(a-m<1e4)){r(!0),d(null);try{const e=await(async(e=!1)=>{const t="news-data";if(ue){for(;ue;)await new Promise(e=>setTimeout(e,100));const e=me.get(t);if(e)return e}const s=Date.now();if(s-he<2e3){const e=me.get(t);if(e)return e}if(!e){const e=me.get(t);if(e)return e}ue=!0,he=s;const a=/micromessenger/i.test(navigator.userAgent),i=e?`/news-data.json?t=${s}&v=2`:"/news-data.json";try{const s=await fetch(i,{method:"GET",cache:e?"no-cache":"default",headers:{Accept:"application/json",...e&&{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"},...a&&{"User-Agent":"WeChat"}},signal:AbortSignal.timeout(1e4)});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const n=s.headers.get("content-type");if(!n||!n.includes("application/json"))throw new Error("æœåŠ¡å™¨è¿”å›çš„ä¸æ˜¯JSONæ•°æ®");const r=await s.json();if(r?.success&&r?.data&&Array.isArray(r.data))return me.set(t,r.data),r.data;if(Array.isArray(r))return me.set(t,r),r;throw new Error("æ–°é—»æ•°æ®æ ¼å¼ä¸æ­£ç¡®")}catch(l){const s=me.get(t);if(s&&s.length>0)return s;if(l instanceof TypeError&&l.message.includes("Failed to fetch"))throw new Error("ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•");throw l}finally{ue=!1}})(s);if(!e||0===e.length)throw new Error("æœªè·å–åˆ°æ–°é—»æ•°æ®");const n=p(e);i(e),t(n),u(a)}catch(o){const s=o instanceof Error?o.message:"ç½‘ç»œè¿æ¥é”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®";if(d(s),0===e.length)try{const e=me.get("news-data");if(e&&e.length>0){const s=p(e);i(e),t(s)}}catch(c){}}finally{r(!1)}}},[p,m,n,e.length]);a.useEffect(()=>{if(s.length>0){const e=p(s);t(e)}},[s,p]),a.useEffect(()=>{f();const e=setInterval(()=>{f(!0)},18e5);return()=>{clearInterval(e)}},[f]);const y=a.useMemo(()=>[...o===x("å…¨éƒ¨")?e:e.filter(e=>x(e.category)===o)].sort((e,t)=>{const s=new Date(e.publishedAt).getTime();return new Date(t.publishedAt).getTime()-s}),[e,o,x]),b=["å…¨éƒ¨","ä¸­å›½AI","å›½é™…AI","ç§‘æŠ€æ–°é—»","AIè¶£å‘³æ–°é—»"],w=a.useMemo(()=>b.map(e=>x(e)),[x]),v=a.useCallback(()=>{me.clear(),f(!0)},[f]);return{news:y,loading:n,error:l,categories:w,selectedCategory:o,setSelectedCategory:c,refreshNews:v,lastFetchTime:m}},xe=()=>{const{news:e,loading:t,error:n,categories:r,selectedCategory:o,setSelectedCategory:l,refreshNews:d}=ge(),{isZh:m}=i(),[u,h]=a.useState(new Date),[g,x]=a.useState(!1),[f,y]=a.useState(!1),[b,w]=a.useState(!1),[v,j]=a.useState(!1);a.useEffect(()=>{!t&&!n&&e.length>0&&h(new Date)},[e,t,n]);const N=()=>{d(),h(new Date)};return s.jsxs(s.Fragment,{children:[s.jsxs(c,{children:[s.jsx("title",{children:"AIæ¨ - æœ€æ–°AIèµ„è®¯èšåˆå¹³å°"}),s.jsx("meta",{name:"description",content:"AIæ¨ä¸ºæ‚¨èšåˆæœ€æ–°çš„äººå·¥æ™ºèƒ½èµ„è®¯ã€æŠ€æœ¯åŠ¨æ€ã€æ·±åº¦åˆ†æå’Œè¡Œä¸šè¶‹åŠ¿ï¼Œè®©æ‚¨ç¬¬ä¸€æ—¶é—´äº†è§£AIé¢†åŸŸçš„æœ€æ–°å‘å±•ã€‚"}),s.jsx("link",{rel:"canonical",href:"https://news.aipush.fun/"}),s.jsx("meta",{name:"robots",content:"index,follow"}),s.jsx("meta",{name:"googlebot",content:"index,follow"}),s.jsx("meta",{name:"wxcard:title",content:"AIæ¨ - æœ€æ–°AIèµ„è®¯èšåˆå¹³å°"}),s.jsx("meta",{name:"wxcard:desc",content:"AIæ¨ä¸ºæ‚¨èšåˆæœ€æ–°çš„äººå·¥æ™ºèƒ½èµ„è®¯ã€æŠ€æœ¯åŠ¨æ€ã€æ·±åº¦åˆ†æå’Œè¡Œä¸šè¶‹åŠ¿ï¼Œè®©æ‚¨ç¬¬ä¸€æ—¶é—´äº†è§£AIé¢†åŸŸçš„æœ€æ–°å‘å±•ã€‚"}),s.jsx("meta",{name:"wxcard:imgUrl",content:`${window.location.origin}/wechat-share-300.png?v=2025080802`}),s.jsx("meta",{name:"wxcard:link",content:window.location.origin}),s.jsx("meta",{property:"og:type",content:"website"}),s.jsx("meta",{property:"og:url",content:window.location.origin}),s.jsx("meta",{property:"og:title",content:"AIæ¨ - æœ€æ–°AIèµ„è®¯èšåˆå¹³å°"}),s.jsx("meta",{property:"og:description",content:"AIæ¨ä¸ºæ‚¨èšåˆæœ€æ–°çš„äººå·¥æ™ºèƒ½èµ„è®¯ã€æŠ€æœ¯åŠ¨æ€ã€æ·±åº¦åˆ†æå’Œè¡Œä¸šè¶‹åŠ¿ï¼Œè®©æ‚¨ç¬¬ä¸€æ—¶é—´äº†è§£AIé¢†åŸŸçš„æœ€æ–°å‘å±•ã€‚"}),s.jsx("meta",{property:"og:image",content:`${window.location.origin}/wechat-share-300.png?v=2025080802`}),s.jsx("meta",{property:"og:image:width",content:"300"}),s.jsx("meta",{property:"og:image:height",content:"300"}),s.jsx("meta",{property:"og:image:type",content:"image/png"}),s.jsx("meta",{property:"og:site_name",content:"AIæ¨"}),s.jsx("meta",{property:"twitter:card",content:"summary_large_image"}),s.jsx("meta",{property:"twitter:url",content:window.location.origin}),s.jsx("meta",{property:"twitter:title",content:"AIæ¨ - æœ€æ–°AIèµ„è®¯èšåˆå¹³å°"}),s.jsx("meta",{property:"twitter:description",content:"AIæ¨ä¸ºæ‚¨èšåˆæœ€æ–°çš„äººå·¥æ™ºèƒ½èµ„è®¯ã€æŠ€æœ¯åŠ¨æ€ã€æ·±åº¦åˆ†æå’Œè¡Œä¸šè¶‹åŠ¿ï¼Œè®©æ‚¨ç¬¬ä¸€æ—¶é—´äº†è§£AIé¢†åŸŸçš„æœ€æ–°å‘å±•ã€‚"}),s.jsx("meta",{property:"twitter:image",content:`${window.location.origin}/wechat-share-300.png?v=2025080802`})]}),s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(H,{onMenuClick:()=>x(!0)}),s.jsx(oe,{isOpen:g,onClose:()=>x(!1),onMenuClick:e=>{switch(x(!1),e){case"daily-briefing":y(!0);break;case"rss-subscribe":j(!0);break;case"disclaimer":w(!0)}}}),s.jsx(ce,{isOpen:f,onClose:()=>y(!1)}),s.jsx(le,{isOpen:b,onClose:()=>w(!1)}),s.jsx(de,{isOpen:v,onClose:()=>j(!1)}),s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(K,{categories:r,activeCategory:o,onCategoryChange:l})}),!n&&s.jsxs("div",{className:"flex items-center justify-between bg-muted/50 rounded-lg px-4 py-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[s.jsx(p,{className:"w-4 h-4"}),s.jsx("span",{children:(e=>{const t=(new Date).getTime()-e.getTime(),s=Math.floor(t/6e4);if(s<1)return m?"åˆšåˆšæ›´æ–°":"Just updated";if(s<60)return m?`${s}åˆ†é’Ÿå‰æ›´æ–°`:`Updated ${s}m ago`;{const e=Math.floor(s/60);return m?`${e}å°æ—¶å‰æ›´æ–°`:`Updated ${e}h ago`}})(u)}),s.jsxs("span",{className:"text-xs opacity-75",children:["â€¢ ",m?"æ¯5åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°":"Auto refresh every 5min"]})]}),s.jsxs("button",{onClick:N,disabled:t,className:"flex items-center space-x-2 px-3 py-1.5 bg-primary/10 hover:bg-primary/20 text-primary rounded-md transition-colors disabled:opacity-50",children:[s.jsx(R,{className:"w-4 h-4 "+(t?"animate-spin":"")}),s.jsx("span",{className:"text-sm",children:m?"åˆ·æ–°":"Refresh"})]})]}),n&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsxs("div",{className:"text-red-500 mb-4 text-center",children:[s.jsx("p",{className:"font-semibold",children:m?"æ–°é—»è·å–å¤±è´¥":"Failed to fetch news"}),s.jsx("p",{className:"text-sm",children:n})]}),s.jsxs("button",{onClick:N,disabled:t,className:"flex items-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50",children:[s.jsx(R,{className:"w-4 h-4 "+(t?"animate-spin":"")}),s.jsx("span",{children:m?"é‡æ–°è·å–":"Retry"})]})]}),t&&s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[s.jsx(S,{className:"w-5 h-5 animate-spin"}),s.jsx("span",{children:m?"æ­£åœ¨è·å–æœ€æ–°AIæ–°é—»...":"Loading latest AI news..."})]})}),!t&&!n&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>s.jsx("div",{className:"animate-fade-in",style:{animationDelay:100*t+"ms"},children:s.jsx(re,{...e})},e.id))}),!t&&!n&&0===e.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:m?"æš‚æ— æ–°é—»":"No news available"}),s.jsx("p",{className:"text-muted-foreground",children:m?"è¯·ç¨åå†è¯•ï¼Œæˆ–åˆ‡æ¢å…¶ä»–åˆ†ç±»æŸ¥çœ‹":"Please try again later or switch to another category"})]})]})]})]})};export{xe as default};
